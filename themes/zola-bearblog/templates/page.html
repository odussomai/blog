{% import "macros.html" as macros %}
{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ super() }}{% endblock %}

{% block main %}
  {%- if not page.extra.menu -%}
    <h1>{{ page.title }}</h1>
    {%- if page.date %}
      <p>
        <i>
          <time datetime="{{ page.date | date(format='%+') }}" pubdate>
            {{- page.date | date(format=config.extra.date_format) -}}
          </time>
        </i>
      </p>
    {%- endif %}
  {%- endif %}
  {%- if config.extra.table_of_contents.show and not page.extra.hide_table_of_contents and page.toc %}
    <details {% if config.extra.table_of_contents.visible_on_load %}open{% endif %}>
      <summary>{{ trans(key="table_of_contents", lang=lang) }}</summary>
      {{- macros::table_of_contents(toc=page.toc, max_level=config.extra.table_of_contents.max_level) | indent() | safe() }}
    </details>
  {%- endif %}
  <main>
    {{ page.content | safe }}
  </main>
  
  <p>
    {%- if page.taxonomies %}
      {%- for name, taxon in page.taxonomies %}
        {{ name | capitalize }}:
        {%- for item in taxon %}
          <a href="{{ get_taxonomy_url(kind=name, name=item, lang=lang) }}">#{{ item }}</a>
        {%- endfor %}
      {%- endfor %}
    {%- endif %}
  </p>

  <!-- Social Share & Human Badge Row -->
  <div style="display: flex; justify-content: space-between; align-items: center; margin: 5rem 0rem 2rem 0; flex-wrap: wrap; gap: 1rem;">
    <!-- Human-written badge (left) -->
    <div>
      <img src="/images/Written-By-a-Human-Not-By-AI-Badge-white.png" 
           alt="Written by Human, Not by AI" 
           style="max-width: 200px; height: auto;">
    </div>
    
    <!-- Social Share Buttons (right) -->
    <div class="share-buttons">
      <a href="https://www.facebook.com/sharer/sharer.php?u={{ page.permalink | urlencode }}" 
         target="_blank" rel="noopener" class="share-btn facebook">
        📘 Facebook
      </a>
      <a href="https://twitter.com/intent/tweet?url={{ page.permalink | urlencode }}&text={{ page.title | urlencode }}" 
         target="_blank" rel="noopener" class="share-btn twitter">
        🐦 X/Twitter
      </a>
      <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ page.permalink | urlencode }}" 
         target="_blank" rel="noopener" class="share-btn linkedin">
        💼 LinkedIn
      </a>
      <a href="mailto:?subject={{ page.title | urlencode }}&body={{ page.permalink | urlencode }}" 
         class="share-btn email">
        📧 Email
      </a>
    </div>
  </div>

  <script src="https://giscus.app/client.js"
          data-repo="odussomai/blog"
          data-repo-id="R_kgDOPW0d8w"
          data-category="Announcements"
          data-category-id="DIC_kwDOPW0d884CuGQg"
          data-mapping="pathname"
          data-strict="0"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="bottom"
          data-theme="preferred_color_scheme"
          data-lang="en"
          crossorigin="anonymous"
          async>
  </script>
{% endblock %}
